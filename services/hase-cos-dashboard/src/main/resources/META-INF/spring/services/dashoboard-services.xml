<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:camel="http://camel.apache.org/schema/spring" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <context:annotation-config/>
    <context:component-scan base-package="com.hase.cos"/>

    <bean id="cosPropertyPlaceholder"
          class="com.hase.cos.dashboard.properties.CosPropertyPlaceholder">
        <property name="ignoreResourceNotFound" value="true"/>
        <property name="locations">
            <list>
                <value>classpath:properties/*-config.properties</value>
            </list>
        </property>
    </bean>

    <camel:routeContext id="com.backbase.portal.integration.service.dashboard"
                        xmlns="http://camel.apache.org/schema/spring">

        <!--
            GET http://localhost:7777/portalserver/services/rest/sample
        -->
        <route id="direct.dashboard.login">
            <from uri="restlet:/loginDashboard?restletMethod=GET&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <setBody>
                <simple>login</simple>
            </setBody>
            <process ref="cosDashboardLoginProcessor"/>
        </route>

        <route id="dashboard">
            <from
                    uri="restlet:/dashboard?restletMethod=GET&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <to uri="direct:dashboard"/>
            <process ref="dashboardProcessor"/>
        </route>

        <!-- direct routes -->
        <route id="direct.dashboard">
            <from uri="direct:dashboard"/>
            <setBody>
                <simple>{"meta":"", "data":{"dashboard":"dashboard"}}</simple>
            </setBody>
        </route>
        <!-- applicationList -->
        <route id="applicationList">
            <from
                    uri="restlet:/applicationList?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="dashboardProcessor"></process>
            <to uri="http://localhost:8081/api/selectApplicationList"/>

        </route>
        <!-- login -->
        <route id="login">
            <from uri="restlet:/login?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="loginProcessor"></process>
            <to uri="http://localhost:8081/api/userLogin"/>
            <process ref="responseLoginSession"></process>
        </route>
        <!-- select permisson by staffID -->
        <route id="role">
            <from
                    uri="restlet:/permissonList?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="permissionProcessor"></process>
            <to uri="http://localhost:8081/api/selectPermissionByRole"/>
        </route>
        <!-- select approval satffList -->
        <route id="approval">
            <from
                    uri="restlet:/selectApprovalStaff?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="approvalStaffProcessor"></process>

            <to uri="http://localhost:8081/api/selectWorkFlowNode"/>
            <process ref="roleStaffProcessor"></process>
            <to uri="http://localhost:8081/api/selectStaffByRole"/>
            <!-- <when></when><choice></choice> -->
        </route>
        <route id="approvalApplication">
            <from
                    uri="restlet:/submitApplication?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="approvalStaffProcessor"></process>
            <to uri="http://localhost:8081/api/updateApplicationInformation"/>
        </route>

        <!-- Application camel url -->
        <route id="applicationCountNum-route">
            <from uri="restlet:/applicationCountNum?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="calendarProcessor"></process>
            <to uri="http://localhost:8081/api/summary?bridgeEndpoint=true" />
        </route>

        <route id="applicationSearchElement-route">
            <from uri="restlet:/applicationSearchElement?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="calendarProcessor"></process>
            <to uri="http://localhost:8081/api/applicationSearchElement?bridgeEndpoint=true" />
        </route>
        <!-- Application detail url -->
        <route id="applicationDetailSeach-route">
            <from uri="restlet:/applicationDetailSeach?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="applicationDetailProcessor"></process>
            <to uri="http://localhost:8081/api/checkList?bridgeEndpoint=true" />
            <process ref="applicationDetailDataProcessor"></process>
        </route>
        <route id="applicationCheckSeach-route">
            <from uri="restlet:/applicationCheckSeach?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="applicationDetailProcessor"></process>
            <to uri="http://localhost:8081/api/checkList?bridgeEndpoint=true" />
            <process ref="applicationDetailDataProcessor"></process>
        </route>

        <route id="inboxAppList">
            <from uri="restlet:/inboxAppList?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="inboxAcceptProcessor"/>
            <to uri="http://localhost:8081/api/searchResult?bridgeEndpoint=true" />
            <process ref="inboxProcessor"></process>
        </route>

        <route id="inboxAppTable">
            <from uri="restlet:/inboxAppTable?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="calendarProcessor"/>
            <to uri="http://localhost:8081/api/fields?bridgeEndpoint=true" />
            <process ref="fieldsProcessor"></process>
        </route>

        <route id="getInboxStaff">
            <from uri="restlet:/getInboxStaff?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="calendarProcessor"/>
            <to uri="http://localhost:8081/api/assign?bridgeEndpoint=true" />
        </route>

        <route id="saveInboxStaff">
            <from uri="restlet:/saveInboxStaff?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="calendarProcessor"/>
            <to uri="http://localhost:8081/api/saveAssignAgent?bridgeEndpoint=true" />
        </route>

        <route id="progressFields">
            <from uri="restlet:/progressFields?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="progressFilterProcessor"/>
            <to uri="http://localhost:8081/api/progressFields?bridgeEndpoint=true" />
            <process ref="progressSessionProcessor"></process>
        </route>
        <route id="progressFilter">
            <from uri="restlet:/progressFilter?restletMethod=POST&amp;restletBinding=#queryStringToHeadersRestletBinding"/>
            <process ref="progressFilterProcessor"/>
            <to uri="http://localhost:8081/api/progressFilter?bridgeEndpoint=true" />
        </route>
    </camel:routeContext>
</beans>
